rules:
  - destination: apimachinery
    branches:
      - name: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/apimachinery
    destination-tag-base: v2
    library: true
  - destination: code-generator
    branches:
      - name: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/code-generator
    destination-tag-base: v3
    library: true
  - destination: client-go
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/client-go
    destination-tag-base: v0
    library: true
  - destination: sdk
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
          - repository: client-go
            branch: main          
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/sdk
    destination-tag-base: v0
    library: true
  - destination: cli
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
          - repository: client-go
            branch: main
          - repository: sdk
            branch: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/cli
    destination-tag-base: v0
    library: true
recursive-delete-patterns:
  - '*/.gitattributes'
default-go-version: 1.24.5
skip-tags: false
skip-non-semver-tags: true
