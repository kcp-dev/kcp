rules:
  - destination: apimachinery
    branches:
      - name: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/apimachinery
      - name: release-0.29
        go: 1.24.11
        source:
          branch: release-0.29
          dirs:
            - staging/src/github.com/kcp-dev/apimachinery
      - name: release-0.30
        go: 1.24.11
        source:
          branch: release-0.30
          dirs:
            - staging/src/github.com/kcp-dev/apimachinery
    destination-tag-base: v2
    library: true
  - destination: code-generator
    branches:
      - name: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/code-generator
      - name: release-0.29
        go: 1.24.11
        source:
          branch: release-0.29
          dirs:
            - staging/src/github.com/kcp-dev/code-generator
      - name: release-0.30
        go: 1.24.11
        source:
          branch: release-0.30
          dirs:
            - staging/src/github.com/kcp-dev/code-generator
    destination-tag-base: v3
    library: true
  - destination: client-go
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/client-go
      - name: release-0.29
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.29
          - repository: code-generator
            branch: release-0.29
        source:
          branch: release-0.29
          dirs:
            - staging/src/github.com/kcp-dev/client-go
      - name: release-0.30
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.30
          - repository: code-generator
            branch: release-0.30
        source:
          branch: release-0.30
          dirs:
            - staging/src/github.com/kcp-dev/client-go
    destination-tag-base: v0
    library: true
  - destination: sdk
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
          - repository: client-go
            branch: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/sdk
      - name: release-0.29
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.29
          - repository: code-generator
            branch: release-0.29
          - repository: client-go
            branch: release-0.29
        source:
          branch: release-0.29
          dirs:
            - staging/src/github.com/kcp-dev/sdk
      - name: release-0.30
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.30
          - repository: code-generator
            branch: release-0.30
          - repository: client-go
            branch: release-0.30
        source:
          branch: release-0.30
          dirs:
            - staging/src/github.com/kcp-dev/sdk
    destination-tag-base: v0
    library: true
  - destination: cli
    branches:
      - name: main
        dependencies:
          - repository: apimachinery
            branch: main
          - repository: code-generator
            branch: main
          - repository: client-go
            branch: main
          - repository: sdk
            branch: main
        source:
          branch: main
          dirs:
            - staging/src/github.com/kcp-dev/cli
      - name: release-0.29
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.29
          - repository: code-generator
            branch: release-0.29
          - repository: client-go
            branch: release-0.29
          - repository: sdk
            branch: release-0.29
        source:
          branch: release-0.29
          dirs:
            - staging/src/github.com/kcp-dev/cli
      - name: release-0.30
        go: 1.24.11
        dependencies:
          - repository: apimachinery
            branch: release-0.30
          - repository: code-generator
            branch: release-0.30
          - repository: client-go
            branch: release-0.30
          - repository: sdk
            branch: release-0.30
        source:
          branch: release-0.30
          dirs:
            - staging/src/github.com/kcp-dev/cli
    destination-tag-base: v0
    library: true
recursive-delete-patterns:
  - '*/.gitattributes'
default-go-version: 1.24.11
skip-tags: false
skip-non-semver-tags: true
