# Kubernetes MCP Server Configuration for KCP
# This configuration enables the MCP server to work with kcp control planes
# using OIDC bearer token authentication

# Cluster provider strategy - use "kcp" for kcp control planes
cluster_provider_strategy = "kcp"

# Base kubeconfig path - provides cluster endpoint and TLS settings
# The bearer token from OIDC replaces the authentication credentials
kubeconfig = "/etc/kubernetes-mcp-server/kubeconfig"

# OIDC Authentication Configuration
# When enabled, the server validates JWT tokens from the Authorization header
# and uses them for all kcp API calls
require_oauth = true
authorization_url = "https://auth.genericcontrolplane.io"
oauth_audience = "platform-mesh"

# Optional: CA certificate for OIDC provider TLS verification
# certificate_authority = "/etc/kubernetes-mcp-server/oidc-ca.crt"

# Toolsets to enable - kcp and core provide kcp-specific functionality
toolsets = ["kcp", "core"]

# Disable pod and node related tools as they are not applicable to kcp
# kcp manages workspaces and logical clusters, not pods/nodes directly
disabled_tools = [
    # Pods tools - not applicable for kcp workspaces
    "pods_list",
    "pods_list_in_namespace",
    "pods_get",
    "pods_delete",
    "pods_top",
    "pods_exec",
    "pods_log",
    "pods_run",
    # Nodes tools - not applicable for kcp workspaces
    "nodes_log",
    "nodes_stats_summary",
    "nodes_top",
]
